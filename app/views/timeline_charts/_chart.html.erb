<script type="text/javascript">
/*********** simile timeline functions **/
var events = {
  <% if all_events %>
    'dateTimeFormat': 'iso8601',
    'events': [
    <% all_events.each_with_index do |event, i| %>
      {
        <% if event.start_date and event.end_date %>
          'start': '<%= event.start_date.iso8601 %>',
          'end'  : '<%= event.end_date.iso8601 %>',
        <% end %>
        'title': '<%= escape_javascript event.title %>',
        'description': '',
        'color' : '<%= event.color %>',
        'textColor' : 'black',
        'eventID' : <%= event.id %>,
        'classname'  : "<%= event.id.to_s %> <%= event.color %>"
        }<% if i != all_events.length - 1 -%>, <% end -%>
    <% end %>
    ]
  <% end %>       
};

initialiseTimeline(<%= edit_mode %>, 
                   <%= @timeline_chart.zoom %>, 
                   <%= @timeline_chart.start_year %>, 
                   <%= @timeline_chart.end_year %>, 
                   <%= @timeline_chart.center_year %>);
</script>
