<script type="text/javascript">
/*********** simile timeline functions **/
var events = {
  <% if all_events %>
    'dateTimeFormat': 'iso8601',
    'events': [
    <% all_events.each_with_index do |event, i| %>
      {
        <% if event.start_date and event.end_date %>
          'start': '<%= event.start_date.iso8601 %>',
          'end'  : '<%= event.end_date.iso8601 %>',
        <% end %>
        'title': '<span id="title_id_<%= event.id %>" class="label_title"><%= escape_javascript event.title %></span>',
        'description': '',
        'color' : '<%= event.color %>',
        'textColor' : 'black',
        'eventID' : <%= event.id %>,
        'classname'  : "<%= event.id.to_s %> <%= event.color %> band_<%=event.band %>"
        }<% if i != all_events.length - 1 -%>, <% end -%>
    <% end %>
    ]
  <% end %>       
};

var tc_start_date = '<%= @timeline_chart.start_date.iso8601 %>'
var tc_end_date = '<%= @timeline_chart.end_date.iso8601 %>'

initialiseTimeline(<%= edit_mode %>, <%= @timeline_chart.zoom %>);
</script>
